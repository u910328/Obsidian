!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";console.log("app loaded"),console.log(obsidian.getAppDependencies()),angular.module("myApp",obsidian.getAppDependencies()).run(["$rootScope","Auth","init",function(t,e,r){console.log("myApp"),r.then(function(t){})}]),angular.bootstrap(document,["myApp"])},{}],2:[function(t,e,r){!function(t){"use strict";obsidian.module("myApp.appVersion",[]).directive("appVersion",["version",function(t){return function(e,r){r.text(t)}}])}(angular)},{}],3:[function(t,e,r){!function(t){"use strict";obsidian.module("firebase.auth",["firebase","firebase.utils"]).factory("Auth",["$firebaseAuth","fbutil","$q","FBURL","snippet","$firebase",function(t,e,r,n,i,o){var a=t(e.ref());return a.checkIfAccountExistOnFb=function(t){var n=r.defer();t||n.reject("AUTH_NEEDED");var i=e.ref("users",t.uid,"createdTime");return i.once("value",function(e){null===e.val()&&n.resolve(t)},function(t){n.reject(t)}),n.promise},a.createAccount=function(t,n){if(t){if(void 0===n||"object"!=typeof n){var s=e.ref("users",t.uid);return e.handler(function(e){s.set(a.basicAccountUserData(t,n),e)})}var c=r.defer();if(n.structure){var u=i.flatten(t,n.flattenConfig);u.authData=t;var l=i.createBatchUpdateValues(u,n.structure);console.log(JSON.stringify(l)),o.batchUpdate(l,n.isConsecutive).then(function(){c.resolve()},n.errorHandler)}else c.reject("USERDATA_STRUCTURE_NEEDED");return c.promise}},a.basicAccountUserData=function(t){var e=t.provider,r=t[e].displayName||t.uid,n=t[e].email||null,o=t[e].profileImageURL||null;"password"===e&&(r=i.firstPartOfEmail(t.password.email));var a={createdTime:Firebase.ServerValue.TIMESTAMP,name:r,email:n,profileImageURL:o};return a[e]={id:t[e].id||null},a},a.loginWithProvider=function(t,e){var r="object"==typeof e?e:{};switch(t){case"password":return a.$authWithPassword({email:r.email,password:r.password},r);case"custom":return a.$authWithCustomToken(r.customToken,r);case"anonymous":return r.rememberMe=r.rememberMe||"none",a.$authAnonymously(r);default:return r.popup===!1?a.$authWithOAuthRedirect(t,r):a.$authWithOAuthPopup(t,r)}},a.removeUserData=function(t,e){var r=new Firebase(n+"users/"+t.uid);r.remove(function(r){r?console.log(r.code):e&&e(t)})},a}])}(angular)},{}],4:[function(t,e,r){!function(t){"use strict";var e=obsidian.module("myApp.errorHandler",[]),r="error",n="/error/:errorId",i="errorCtrl",o="components/errorHandler/error.html";e.controller(i,["$scope","$stateParams",function(t,e){t.error=e}]),e.config(["$stateProvider",function(t){t.state(r,{url:n,templateUrl:o,controller:i,resolve:{user:["Auth",function(t){return t.$waitForAuth()}]}})}]),e.factory("$errorHandler",["$state",function(t){function e(e){t.go("error",e),$scope.$$phase||$scope.$apply()}return function(t){var r=t||{};return r.type?void(r.openErrorPage&&e(r)):function(t){console.log(JSON.stringify(t))}}}])}(angular)},{}],5:[function(t,e,r){!function(t){"use strict";obsidian.module("myApp.filters",[]).filter("reverse",function(){return function(t){return t.slice().reverse()}}).filter("consecutive",["$filter","snippet",function(e,r){return function(r,n,i){var o=r||[],a=t.copy(o);if("object"==typeof n)t.forEach(n,function(t,r){(t||""===t)&&(a=t===!0?e("filter")(a,r):e("filter")(a,t))});else if("string"==typeof n){n=n.trim();for(var s=n.split(" "),c=0;c<s.length;c++)a=e("filter")(a,s[c]);a=""===n?o:a}return i?a.slice().reverse():a}}]).filter("filterMultiple",["$filter",function(e){return function(r,n){var i={data:r,filteredData:[],applyFilter:function(r,n){var i=[];if(0==this.filteredData.length&&(this.filteredData=this.data),r){var o={};if(t.isArray(r)){if(t.isArray(r)&&r.length>0)for(var a=0;a<r.length;a++)t.isDefined(r[a])&&(o[n]=r[a],i=i.concat(e("filter")(this.filteredData,o)))}else o[n]=r,i=i.concat(e("filter")(this.filteredData,o));i.length>0&&(this.filteredData=i)}}};return n&&t.forEach(n,function(t,e){i.applyFilter(t,e)}),i.filteredData}}]).filter("unique",function(){return function(t,e){for(var r={},n=[],i=0;i<t.length;i++)"undefined"==typeof r[t[i][e]]&&(r[t[i][e]]="",n.push(t[i]));return n}}).filter("percentage",["$window",function(e){return function(r,n,i){return n=t.isNumber(n)?n:3,i=i||"%",e.isNaN(r)?"":Math.round(r*Math.pow(10,n+2))/Math.pow(10,n)+i}}])}(angular)},{}],6:[function(t,e,r){!function(t){var e=obsidian.module("firebase.utils",["firebase","myApp.config"]);e.factory("fbutil",["$window","FBURL","$q",function(e,r,n){"use strict";function i(e){for(var r=0;r<e.length;r++)if(t.isArray(e[r]))e[r]=i(e[r]);else if("string"!=typeof e[r])throw new Error("Argument "+r+" to firebaseRef is not a string: "+e[r]);return e.join("/")}function o(t){var n=new e.Firebase(r),o=Array.prototype.slice.call(arguments);return o.length&&(n=n.child(i(o))),n}var a={handler:function(t,e){return a.defer(function(r){t.call(e,function(t,e){null!==t?r.reject(t):r.resolve(e)})})},defer:function(t,e){var r=n.defer();return t.call(e,r),r.promise},ref:o};return a}])}(angular)},{}],7:[function(t,e,r){!function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,eventsToHandle:["input","keyup","click","focus"]}).directive("uiMask",["uiMaskConfig","$parse",function(t,e){function r(t){return t===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(t.type||t.href||~t.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var n=t;return function(t,i,o,a){function s(t){return angular.isDefined(t)?(y(t),V?(d(),p(),!0):f()):f()}function c(t){t&&(I=t,V&&i.val(v(g(i.val()))))}function u(t){return V?(F=g(t||""),R=m(F),a.$setValidity("mask",R),R&&F.length?v(F):void 0):t}function l(t){return V?(F=g(t||""),R=m(F),a.$viewValue=F.length?v(F):"",a.$setValidity("mask",R),""===F&&o.required&&a.$setValidity("required",!a.$error.required),R?F:void 0):t}function f(){return V=!1,h(),angular.isDefined(H)?i.attr("placeholder",H):i.removeAttr("placeholder"),angular.isDefined(W)?i.attr("maxlength",W):i.removeAttr("maxlength"),i.val(a.$modelValue),a.$viewValue=a.$modelValue,!1}function d(){F=_=g(a.$modelValue||""),M=q=v(F),R=m(F),o.maxlength&&i.attr("maxlength",2*E[E.length-1]),H||i.attr("placeholder",I);for(var t=a.$modelValue,e=a.$formatters.length;e--;)t=a.$formatters[e](t);a.$viewValue=t||"",a.$render()}function p(){B||(i.bind("blur",A),i.bind("mousedown mouseup",C),i.bind(J.eventsToHandle.join(" "),P),i.bind("paste",O),B=!0)}function h(){B&&(i.unbind("blur",A),i.unbind("mousedown",C),i.unbind("mouseup",C),i.unbind("input",P),i.unbind("keyup",P),i.unbind("click",P),i.unbind("focus",P),i.unbind("paste",O),B=!1)}function m(t){return t.length?t.length>=x:!0}function g(t){var e="",r=D.slice();return t=t.toString(),angular.forEach(T,function(e){t=t.replace(e,"")}),angular.forEach(t.split(""),function(t){r.length&&r[0].test(t)&&(e+=t,r.shift())}),e}function v(t){var e="",r=E.slice();return angular.forEach(I.split(""),function(n,i){t.length&&i===r[0]?(e+=t.charAt(0)||"_",t=t.substr(1),r.shift()):e+=n}),e}function b(t){var e=angular.isDefined(o.uiMaskPlaceholder)?o.uiMaskPlaceholder:o.placeholder;return"undefined"!=typeof e&&e[t]?e[t]:"_"}function $(){return I.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function y(t){var e=0;if(E=[],D=[],I="","string"==typeof t){x=0;var r=!1,n=0,i=t.split("");angular.forEach(i,function(t,i){J.maskDefinitions[t]?(E.push(e),I+=b(i-n),D.push(J.maskDefinitions[t]),e++,r||x++):"?"===t?(r=!0,n++):(I+=t,e++)})}E.push(E.slice().pop()+1),T=$(),V=E.length>1?!0:!1}function A(){J.clearOnBlur&&(N=0,L=0,R&&0!==F.length||(M="",i.val(""),t.$apply(function(){a.$setViewValue("")})))}function C(t){"mousedown"===t.type?i.bind("mouseout",w):i.unbind("mouseout",w)}function w(){L=j(this),i.unbind("mouseout",w)}function O(){S(this,i.val().length)}function P(t){t=t||{};var e=t.which,r=t.type;if(16!==e&&91!==e){var n,o=i.val(),s=q,c=g(o),u=_,l=U(this)||0,f=N||0,d=l-f,p=E[0],h=E[c.length]||E.slice().shift(),m=L||0,b=j(this)>0,$=m>0,y=o.length>s.length||m&&o.length>s.length-m,A=o.length<s.length||m&&o.length===s.length-m,C=e>=37&&40>=e&&t.shiftKey,w=37===e,O=8===e||"keyup"!==r&&A&&-1===d,P=46===e||"keyup"!==r&&A&&0===d&&!$,D=(w||O||"click"===r)&&l>p;if(L=j(this),!C&&(!b||"click"!==r&&"keyup"!==r)){if("input"===r&&A&&!$&&c===u){for(;O&&l>p&&!k(l);)l--;for(;P&&h>l&&-1===E.indexOf(l);)l++;var I=E.indexOf(l);c=c.substring(0,I)+c.substring(I+1)}for(n=v(c),q=n,_=c,i.val(n),a.$setViewValue(c),y&&p>=l&&(l=p+1),D&&l--,l=l>h?h:p>l?p:l;!k(l)&&l>p&&h>l;)l+=D?-1:1;(D&&h>l||y&&!k(f))&&l++,N=l,S(this,l)}}}function k(t){return E.indexOf(t)>-1}function U(t){if(!t)return 0;if(void 0!==t.selectionStart)return t.selectionStart;if(document.selection&&r(i[0])){t.focus();var e=document.selection.createRange();return e.moveStart("character",t.value?-t.value.length:0),e.text.length}return 0}function S(t,e){if(!t)return 0;if(0!==t.offsetWidth&&0!==t.offsetHeight)if(t.setSelectionRange)r(i[0])&&(t.focus(),t.setSelectionRange(e,e));else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}function j(t){return t?void 0!==t.selectionStart?t.selectionEnd-t.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var E,D,I,T,x,F,M,R,q,_,N,L,V=!1,B=!1,H=o.placeholder,W=o.maxlength,J={};o.uiOptions?(J=t.$eval("["+o.uiOptions+"]"),angular.isObject(J[0])&&(J=function(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(void 0===e[r]?e[r]=angular.copy(t[r]):angular.extend(e[r],t[r]));return e}(n,J[0]))):J=n,o.$observe("uiMask",s),angular.isDefined(o.uiMaskPlaceholder)?o.$observe("uiMaskPlaceholder",c):o.$observe("placeholder",c);var Q=!1;o.$observe("modelViewValue",function(t){"true"===t&&(Q=!0)}),t.$watch(o.ngModel,function(r){if(Q&&r){var n=e(o.ngModel);n.assign(t,a.$viewValue)}}),a.$formatters.push(u),a.$parsers.push(l),i.bind("mousedown mouseup",C),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),r=e.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);r>i;i++)if(i in e&&e[i]===t)return i;return-1})}}}}])}()},{}],8:[function(t,e,r){!function(t){"use strict";var e=obsidian.module("ngFirebase",[]);e.directive("ngFirebase",["$firebase",function(e){return{restrict:"A",transclude:!0,scope:{ngFirebase:"@",loading:"@"},link:function(r,n,i,o,a){function s(){function o(e){n.empty(),a(function(r,o){if(n.append(r),e===s){if(i.pure){var a={};t.forEach(e,function(t,e){a[e]=t}),o[c]=e.$value?e.$value:a}else o[c]=e.$value?e.$value:e;o.$firebaseObject=e,o.$eval(i.loaded)}else o[u]=e,s.$destroy()})}var s=e.$object(r.ngFirebase);n.append(r.loading),s.$loaded(o,o);var c=i.valueAs||"$value",u=i.errorAs||"$error"}r.$watch("ngFirebase",function(){e.isRefUrlValid(r.ngFirebase)&&s()})}}}])}(angular)},{}],9:[function(t,e,r){!function(t){"use strict";t.module("ngCart",["ngCart.directives"]).config([function(){}]).provider("$ngCart",function(){this.$get=function(){}}).run(["$rootScope","ngCart","ngCartItem","store",function(e,r,n,i){e.$on("ngCart:change",function(){r.$save()}),t.isObject(i.get("cart"))?r.$restore(i.get("cart")):r.init()}]).service("ngCart",["$rootScope","ngCartItem","store",function(e,r,n){this.init=function(){this.$cart={shipping:null,taxRate:null,tax:null,items:[]}},this.addItem=function(t,n,i,o,a){var s=this.getItemById(t);if("object"==typeof s)s.setQuantity(o,!1);else{var c=new r(t,n,i,o,a);this.$cart.items.push(c),e.$broadcast("ngCart:itemAdded",c)}e.$broadcast("ngCart:change",{})},this.getItemById=function(e){var r=this.getCart().items,n=!1;return t.forEach(r,function(t){t.getId()===e&&(n=t)}),n},this.setShipping=function(t){return this.$cart.shipping=t,this.getShipping()},this.getShipping=function(){return 0==this.getCart().items.length?0:this.getCart().shipping},this.setTaxRate=function(t){return this.$cart.taxRate=+parseFloat(t).toFixed(2),this.getTaxRate()},this.getTaxRate=function(){return this.$cart.taxRate},this.getTax=function(){return+parseFloat(this.getSubTotal()/100*this.getCart().taxRate).toFixed(2)},this.setCart=function(t){return this.$cart=t,this.getCart()},this.getCart=function(){return this.$cart},this.getItems=function(){return this.getCart().items},this.getTotalItems=function(){var e=0,r=this.getItems();return t.forEach(r,function(t){e+=t.getQuantity()}),e},this.getTotalUniqueItems=function(){return this.getCart().items.length},this.getSubTotal=function(){var e=0;return t.forEach(this.getCart().items,function(t){e+=t.getTotal()}),+parseFloat(e).toFixed(2)},this.totalCost=function(){return+parseFloat(this.getSubTotal()+this.getShipping()+this.getTax()).toFixed(2)},this.removeItem=function(t){this.$cart.items.splice(t,1),e.$broadcast("ngCart:itemRemoved",{}),e.$broadcast("ngCart:change",{})},this.removeItemById=function(r){var n=this.getCart();t.forEach(n.items,function(t,e){t.getId()===r&&n.items.splice(e,1)}),this.setCart(n),e.$broadcast("ngCart:itemRemoved",{}),e.$broadcast("ngCart:change",{})},this.empty=function(){e.$broadcast("ngCart:change",{}),this.$cart.items=[],localStorage.removeItem("cart")},this.isEmpty=function(){return this.$cart.items.length>0?!1:!0},this.toObject=function(){if(0===this.getItems().length)return!1;var e=[];return t.forEach(this.getItems(),function(t){e.push(t.toObject())}),{shipping:this.getShipping(),tax:this.getTax(),taxRate:this.getTaxRate(),subTotal:this.getSubTotal(),totalCost:this.totalCost(),items:e}},this.$restore=function(e){var n=this;n.init(),n.$cart.shipping=e.shipping,n.$cart.tax=e.tax,t.forEach(e.items,function(t){n.$cart.items.push(new r(t._id,t._name,t._price,t._quantity,t._data))}),this.$save()},this.$save=function(){return n.set("cart",JSON.stringify(this.getCart()))}}]).factory("ngCartItem",["$rootScope","$log",function(t,e){var r=function(t,e,r,n,i){this.setId(t),this.setName(e),this.setPrice(r),this.setQuantity(n),this.setData(i)};return r.prototype.setId=function(t){t?this._id=t:e.error("An ID must be provided")},r.prototype.getId=function(){return this._id},r.prototype.setName=function(t){t?this._name=t:e.error("A name must be provided")},r.prototype.getName=function(){return this._name},r.prototype.setPrice=function(t){var r=parseFloat(t);r?0>=r?e.error("A price must be over 0"):this._price=r:e.error("A price must be provided")},r.prototype.getPrice=function(){return this._price},r.prototype.setQuantity=function(r,n){var i=parseInt(r);i%1===0?(n===!0?this._quantity+=i:this._quantity=i,this._quantity<1&&(this._quantity=1)):(this._quantity=1,e.info("Quantity must be an integer and was defaulted to 1")),t.$broadcast("ngCart:change",{})},r.prototype.getQuantity=function(){return this._quantity},r.prototype.setData=function(t){t&&(this._data=t)},r.prototype.getData=function(){return this._data?this._data:void e.info("This item has no data")},r.prototype.getTotal=function(){return+parseFloat(this.getQuantity()*this.getPrice()).toFixed(2)},r.prototype.toObject=function(){return{id:this.getId(),name:this.getName(),price:this.getPrice(),quantity:this.getQuantity(),data:this.getData(),total:this.getTotal()}},r}]).service("store",["$window",function(e){return{get:function(r){if(e.localStorage[r]){var n=t.fromJson(e.localStorage[r]);return JSON.parse(n)}return!1},set:function(r,n){return void 0===n?e.localStorage.removeItem(r):e.localStorage[r]=t.toJson(n),e.localStorage[r]}}}]).controller("CartController",["$scope","ngCart",function(t,e){t.ngCart=e}]).value("version","1.0.0"),t.module("ngCart.directives",["ngCart.fulfilment"]).controller("CartController",["$scope","ngCart",function(t,e){t.ngCart=e}]).directive("ngcartAddtocart",["ngCart",function(t){return{restrict:"E",controller:"CartController",scope:{id:"@",name:"@",quantity:"@",quantityMax:"@",price:"@",data:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"template/ngCart/addtocart.html":e.templateUrl},link:function(e,r,n){e.attrs=n,e.inCart=function(){return t.getItemById(n.id)},e.inCart()?e.q=t.getItemById(n.id).getQuantity():e.q=parseInt(e.quantity),e.qtyOpt=[];for(var i=1;i<=e.quantityMax;i++)e.qtyOpt.push(i)}}}]).directive("ngcartCart",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"template/ngCart/cart.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartSummary",[function(){return{restrict:"E",controller:"CartController",scope:{},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"template/ngCart/summary.html":e.templateUrl}}}]).directive("ngcartCheckout",[function(){return{restrict:"E",controller:["$rootScope","$scope","ngCart","fulfilmentProvider",function(t,e,r,n){e.ngCart=r,e.checkout=function(){n.setService(e.service),n.setSettings(e.settings),n.checkout().success(function(e,r,n,i){t.$broadcast("ngCart:checkout_succeeded",e)}).error(function(e,r,n,i){t.$broadcast("ngCart:checkout_failed",{statusCode:r,error:e})})}}],scope:{service:"@",settings:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"template/ngCart/checkout.html":e.templateUrl}}}]),t.module("ngCart.fulfilment",[]).service("fulfilmentProvider",["$injector",function(t){this._obj={service:void 0,settings:void 0},this.setService=function(t){this._obj.service=t},this.setSettings=function(t){this._obj.settings=t},this.checkout=function(){var e=t.get("ngCart.fulfilment."+this._obj.service);return e.checkout(this._obj.settings)}}]).service("ngCart.fulfilment.log",["$q","$log","ngCart",function(t,e,r){this.checkout=function(){var n=t.defer();return e.info(r.toObject()),n.resolve({cart:r.toObject()}),n.promise}}]).service("ngCart.fulfilment.http",["$http","ngCart",function(t,e){this.checkout=function(r){return t.post(r.url,{data:e.toObject(),options:r.options})}}]).service("ngCart.fulfilment.paypal",["$http","ngCart",function(t,e){}])}(angular)},{}],10:[function(t,e,r){!function(t){var e=obsidian.module("myApp.ngcloakDecorator",[]);e.config(["$provide",function(t){t.decorator("ngCloakDirective",["$delegate","Auth",function(t,e){var r=t[0],n=r.compile;return r.compile=function(t,i){e.$waitForAuth().then(function(){n.call(r,t,i)})},t}])}])}(angular)},{}],11:[function(t,e,r){!function(t){var e=t.module("ngNotify",[]);e.factory("ngNotify",["$timeout","$http","$compile","$templateCache","$rootScope",function(e,r,n,i,o){var a=10,s=15,c=1e4,u="angular-notify.html",l="center",f=document.body,d=0,p=[],h=[],m=function(m){"object"!=typeof m&&(m={message:m}),m.duration=m.duration?m.duration:c,m.templateUrl=m.templateUrl?m.templateUrl:u,m.container=m.container?m.container:f,m.classes=m.classes?m.classes:"";var g=m.scope?m.scope.$new():o.$new();if(g.$position=m.position?m.position:l,g.$message=m.message,g.$classes=m.classes,g.$messageTemplate=m.messageTemplate,d>0)for(var v=h.length+1-d,b=0;v>b;b++)h[b].$close();r.get(m.templateUrl,{cache:i}).success(function(r){var i=n(r)(g);if(i.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(t){("opacity"===t.propertyName||0===t.currentTarget.style.opacity||t.originalEvent&&"opacity"===t.originalEvent.propertyName)&&(i.remove(),p.splice(p.indexOf(i),1),h.splice(h.indexOf(g),1),u())}),m.messageTemplate){for(var o,c=0;c<i.children().length;c++)if(t.element(i.children()[c]).hasClass("cg-notify-message-template")){o=t.element(i.children()[c]);break}if(!o)throw new Error("ngNotify could not find the .ng-notify-message-template element in "+m.templateUrl+".");o.append(n(m.messageTemplate)(g))}t.element(m.container).append(i),p.push(i),"center"===g.$position&&e(function(){g.$centerMargin="-"+i[0].offsetWidth/2+"px"}),g.$close=function(){i.css("opacity",0).attr("data-closing","true"),u()};var u=function(){for(var t=0,e=a,r=p.length-1;r>=0;r--){var n=10,i=p[r],o=i[0].offsetHeight,c=e+o+n;i.attr("data-closing")?c+=20:e+=o+s,i.css("top",c+"px").css("margin-top","-"+(o+n)+"px").css("visibility","visible"),t++}};e(function(){u()}),m.duration>0&&e(function(){g.$close()},m.duration)}).error(function(t){throw new Error("Template specified for ngNotify ("+m.templateUrl+") could not be loaded. "+t)});var $={};return $.close=function(){g.$close&&g.$close()},Object.defineProperty($,"message",{get:function(){return g.$message},set:function(t){g.$message=t}}),h.push(g),$};return m.config=function(e){a=t.isUndefined(e.startTop)?a:e.startTop,s=t.isUndefined(e.verticalSpacing)?s:e.verticalSpacing,c=t.isUndefined(e.duration)?c:e.duration,u=e.templateUrl?e.templateUrl:u,l=t.isUndefined(e.position)?l:e.position,f=e.container?e.container:f,d=e.maximumOpen?e.maximumOpen:d},m.closeAll=function(){for(var t=p.length-1;t>=0;t--){var e=p[t];e.css("opacity",0)}},m}]),e.run(["$templateCache",function(t){"use strict";t.put("angular-notify.html","<div class=\"cg-notify-message\" ng-class=\"[$classes, \n    $position === 'center' ? 'cg-notify-message-center' : '',\n    $position === 'left' ? 'cg-notify-message-left' : '',\n    $position === 'right' ? 'cg-notify-message-right' : '']\"\n    ng-style=\"{'margin-left': $centerMargin}\">\n\n    <div ng-show=\"!$messageTemplate\">\n        {{$message}}\n    </div>\n\n"+'    <div ng-show="$messageTemplate" class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')}])}(angular)},{}],12:[function(t,e,r){!function(){"use strict";angular.module("ui.scrollpoint",[]).directive("uiScrollpoint",["$window",function(t){function e(){if(angular.isDefined(t.pageYOffset))return t.pageYOffset;var e=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;return e.scrollTop}return{require:"^?uiScrollpointTarget",link:function(r,n,i,o){function a(){var t=c?i.uiScrollpoint:n[0].offsetTop+u,r=o?l[0].scrollTop:e();if(!n.hasClass("ui-scrollpoint")&&r>t){if(n.addClass("ui-scrollpoint"),i.scrollpointGroup){var a=i.scrollpointGroup.split(" ");for(var f in a)angular.element(document.getElementById(a[f])).addClass("ui-scrollpoint")}s=t}else if(n.hasClass("ui-scrollpoint")&&s>r&&(n.removeClass("ui-scrollpoint"),i.scrollpointGroup)){var a=i.scrollpointGroup.split(" ");for(var f in a)angular.element(document.getElementById(a[f])).removeClass("ui-scrollpoint")}}var s,c=!0,u=0,l=o&&o.$element||angular.element(t);i.uiScrollpoint?"string"==typeof i.uiScrollpoint&&("-"===i.uiScrollpoint.charAt(0)?(c=!1,u=-parseFloat(i.uiScrollpoint.substr(1))):"+"===i.uiScrollpoint.charAt(0)&&(c=!1,u=parseFloat(i.uiScrollpoint.substr(1)))):c=!1,s=c?i.uiScrollpoint:n[0].offsetTop+u,l.on("scroll",a),a(),r.$on("$destroy",function(){l.off("scroll",a)})}}}]).directive("uiScrollpointTarget",[function(){return{controller:["$element",function(t){this.$element=t}]}}])}()},{}],13:[function(t,e,r){!function(t){"use strict";var e=[],r=obsidian.module("myApp.security",["ui.router","firebase.auth","myApp.config"]);r.config(["$stateProvider",function(t){t.stateAuthenticated=function(r,n){return e.push(r),n.resolve=n.resolve||{},n.resolve.authData=["Auth",function(t){return t.$requireAuth()}],t.state(r,n),this}}]).run(["$rootScope","$location","$state","Auth","loginRedirectState",function(t,r,n,i,o){function a(t){!t&&s(n.current.name)&&(console.log("check failed",t,r.path()),n.go(o))}function s(t){return console.log("authRequired?",t,e.indexOf(t)),-1!==e.indexOf(t)}i.$onAuth(a),t.$on("$stateChangeError",function(t,e,r,i,a,s){"AUTH_REQUIRED"===s&&(t.preventDefault(),n.transitionTo(o))})}])}(angular)},{}],14:[function(t,e,r){!function(t){var e;e={handler:"&customHandler"},t.module("socialLinks",[]).factory("socialLinker",["$window","$location",function(t,e){return function(r){return function(n,i,o){var a,s,c;return c="status=no, width="+(n.socialWidth||640)+", height="+(n.socialWidth||480)+", resizable=yes, toolbar=no, menubar=no, scrollbars=no, location=no, directories=no",a=function(){return o.customUrl||e.absUrl()},o.$observe("customUrl",function(){var t;return t=r(n,a()),"A"!==i[0].nodeName||null!=o.href&&""!==o.href?void 0:i.attr("href",t)}),i.attr("rel","nofollow"),s=function(e){var i,o;return e.preventDefault(),i=r(n,a()),o=t.open(i,"popupwindow",c).focus()},null!=o.customHandler?i.on("click",s=function(t){var e;return e=r(n,a()),i.attr("href",e),n.handler({$event:t,$url:e})}):i.on("click",s),n.$on("$destroy",function(){return i.off("click",s)})}}}]).directive("socialFacebook",["socialLinker",function(t){return{restrict:"ACEM",scope:e,link:t(function(t,e){var r;return r=["https://facebook.com/sharer.php?"],r.push("u="+encodeURIComponent(e)),r.join("")})}}]).directive("socialTwitter",["socialLinker",function(r){return{restrict:"ACEM",scope:t.extend({status:"@status"},e),link:r(function(t,e){return t.status||(t.status="Check this out! - "+e),"https://twitter.com/intent/tweet?text="+encodeURIComponent(t.status)})}}]).directive("socialGplus",["socialLinker",function(t){return{restrict:"ACEM",scope:e,link:t(function(t,e){return"https://plus.google.com/share?url="+encodeURIComponent(e)})}}]).directive("socialPinterest",["socialLinker",function(r){return{restrict:"ACEM",scope:t.extend({media:"@media",description:"@description"},e),link:r(function(t,e){return"http://pinterest.com/pin/create/button/?url="+encodeURIComponent(e)+"&amp;media="+encodeURIComponent(t.media)+"&amp;description="+encodeURIComponent(t.description)})}}]).directive("socialStumbleupon",["socialLinker",function(t){return{restrict:"ACEM",scope:e,link:t(function(t,e){return"https://stumbleupon.com/submit?url="+encodeURIComponent(e)})}}]).directive("socialLinkedin",["socialLinker",function(t){return{restrict:"ACEM",scope:e,link:t(function(t,e){return"https://linkedin.com/shareArticle?url="+encodeURIComponent(e)})}}]).directive("socialReddit",["socialLinker",function(t){return{restrict:"ACEM",scope:e,link:t(function(t,e){return"https://www.reddit.com/submit?url="+encodeURIComponent(e)})}}]).directive("socialVk",["socialLinker",function(t){return{restrict:"ACEM",scope:e,link:t(function(t,e){return"http://vkontakte.ru/share.php?url="+encodeURIComponent(e)})}}]).directive("socialOk",["socialLinker",function(t){return{restrict:"ACEM",scope:e,link:t(function(t,e){return"http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl="+encodeURIComponent(e)})}}]).directive("socialXing",["socialLinker",function(t){return{restrict:"ACEM",scope:e,link:t(function(t,e){return"https://www.xing.com/spi/shares/new?url="+encodeURIComponent(e)})}}])}(angular)},{}],15:[function(t,e,r){!function(){obsidian.module("core.$firebase",["firebase"]).factory("$firebase",["FBURL","config","fbutil","$firebaseObject","$q","snippet",function(t,e,r,n,i,o){function a(e,r){function n(){return void 0!==i.keepOnline?!!i.keepOnline:void 0!==a.keepOnline?!!a.keepOnline:!0}var i=r||{},o=e||"",a=$.databases[o.split("@")[1]]||{};this.dbName=a.Name||t.split("//")[1].split(".fi")[0],this.dbUrl="https://"+this.dbName+".firebaseio.com",this.path=o.split("@")[0],this.url=this.dbUrl+"/"+this.path,this.t=(new Date).getTime().toString(),this.params=i.params||{},this.keepOnline=n()}function s(t,e){var r=new a(t,e);return r.ref()}function c(t,e){var r=e||{},n=$.ref(t);if(!r.orderBy)return n;var i="orderBy"+r.orderBy.split(":")[0];return n="orderByChild"===i?n[i](r.orderBy.split(":")[1]):n[i](),r.startAt&&(n=n.startAt(r.startAt)),r.endAt&&(n=n.endAt(r.endAt)),r.equalTo&&(n=n.equalTo(r.equalTo)),r.limitToFirst&&(n=n.limitToFirst(r.limitToFirst)),r.limitToLast&&(n=n.limitToLast(r.limitToLast)),n}function u(t){return A[t]?A[t]:(A[t]=n(s(t)),A[t])}function l(t){return"string"==typeof t&&-1===t.split("/").indexOf("")}function f(t,e){function r(t){return function(e){o[t].resolve(e.val())}}var n="object"==typeof e?e:{},o={},a={};for(var s in t)if(t.hasOwnProperty(s)){o[s]=i.defer(),a[s]=o[s].promise;var u=t[s],l=c(u.refUrl,u.opt||n);l.once("value",r(s))}return i.all(a)}function d(t,r,n,s,c){var u=i.defer(),l=o.replaceParamsInString(t,c),f=new a(l),d=f.ref(),p=s?"set":"update",h=angular.extend({},c,f.params);if("object"==typeof r&&null!=r)for(var m in h){var g=m.split("$")[1];void 0!==r[g]&&(r[g]=h[m])}else if("string"==typeof r)for(var m in h)r.replace(m,h[m]);return f.goOnline(),d[p](r,function(r){n&&n.apply(null,[r]),r?(console.log("Update failed: "+t),u.reject(r)):(e.debug&&console.log("Update success: "+t),u.resolve()),f.goOffline()}),u.promise.params=f.params,u.promise}function p(t,e,r,n){d(t,e,r,!0,n)}function h(t,e){function r(e){var r=$.update(t[e].refUrl,t[e].value,n(e),t[e].set,a).params;a=angular.extend(a,r)}function n(e){function n(n){var i=e===t.length-1;t[e]&&t[e].onComplete&&t[e].onComplete.apply(null,[n]),n?o.reject(n):i?o.resolve({params:a}):r(e+1)}function i(r){t[e]&&t[e].onComplete&&t[e].onComplete.apply(null,[r]),r?c[e].reject(r):c[e].resolve()}return s?n:i}var o=i.defer(),a=angular.extend({},$.params),s=e||void 0===e;if(s)r(0);else{for(var c=[],u=[],l=0;l<t.length;l++)c[l]=i.defer(),u[l]=c[l].promise,r(l);i.all(u).then(function(){o.resolve({params:a})},function(t){o.reject(t)})}return o.promise}function m(t,e){var r=new Firebase(t),n=new Firebase(e);r.once("value",function(t){n.update(t.val())})}function g(t){var e={},r=i.defer();if("object"==typeof t)return h(t.request,!0).then(function(n){if(!t.response)return void r.resolve(n);angular.extend(e,n);var i=o.replaceParamsInObj(t.response,n.params);v(i).then(function(t){angular.extend(e,t),r.resolve(e)},function(t){r.reject(t)})},function(t){r.reject(t)}),r.promise}function v(t){function e(t,e){var o=i.derfer();n[t]=o.promise;var a=function(n){r[t]===!0?(o.resolve(n.val()),s(e).off()):r[t]=!0},c=function(t){o.reject(t)};return[a,c]}var r={},n={};for(var o in t)t.hasOwnProperty(o)&&s(t[o]).on("value",e(o,t[o])[0],e(o,t[o])[1]);return i.all(n)}function b(t,e){function r(){h=o.replaceParamsInObj(h,c);for(var t in l)l.hasOwnProperty(t)&&-1===h[t].indexOf(p)&&!l[t]&&(u[t]=new function(t){return function(e){"string"==typeof e.val()&&(c[p+t]=e.val()),a[t]=e.val(),delete l[t],m.resolve(),r()}}(t),l[t]=!0,s(h[t]).once("value",u[t]))}var n=e?e:{},a={},c={},u={},l={},f=i.defer(),d=Object.keys(t).length,p=n.indicator||"&",h=angular.extend({},t),m=new o.WaitUntil(d,function(){f.resolve(a)});for(var g in t)l[g]=!1;return r(),f.promise}var $={FbObj:a,update:d,set:p,batchUpdate:h,params:{},databases:{},ref:s,$communicate:g,$object:u,getMultipleRefVal:b,isRefUrlValid:l,move:m,load:f},y={};a.prototype={ref:function(){var t=new Firebase(this.dbUrl);if(""===this.path)return t;for(var e=this.path.split("/"),r=0;r<e.length;r++)"$"===e[r].charAt(0)?(t=t.push(),this.params[e[r]]=t.key()):t=t.child(e[r]);return this.url=t.toString(),this.path=this.url.split(".com/")[1],t},goOnline:function(){return void 0===y[this.dbUrl]&&(y[this.dbUrl]=[]),0===y[this.dbUrl].length&&(this.keepOnline||(Firebase.goOnline(this.dbUrl),console.log(this.dbUrl,"is online",this.t))),y[this.dbUrl].push(this.t),this},goOffline:function(){if(this.keepOnline)return this;void 0===y[this.dbUrl]&&(y[this.dbUrl]=[]),1===y[this.dbUrl].length&&(this.keepOnline||(Firebase.goOffline(this.dbUrl),console.log(this.dbUrl,"is offline",this.t)));var t=y[this.dbUrl].indexOf(this.t);return-1!=t&&y[this.dbUrl].splice(t,1),this}};var A={};return $}])}()},{}],16:[function(t,e,r){!function(){obsidian.module("core.elasticSearch",[]).factory("elasticSearch",["FBURL","Auth","$q","$rootScope",function(t,e,r,n){
function i(e,r,i,a){e=e||n;var s=new Firebase(t+"/search"),c=s.child("request").push({index:r,type:i,query:a}).key();console.log("search",c,{index:r,type:i,query:a}),s.child("response/"+c).on("value",o.bind(e))}function o(t){if(null!==t.val()){var e=t.val();t.ref().off("value",o),t.ref().remove(),this.result=e,this.$digest()}}return i}])}()},{}],17:[function(t,e,r){!function(){obsidian.module("core.init",["firebase"]).factory("init",["Auth","$q","$http","$firebase","$rootScope",function(t,e,r,n,i){var o=e.defer();r.jsonp("http://www.telize.com/geoip?callback=JSON_CALLBACK").then(function(t){console.log(t)});var a={stripeKey:{refUrl:"config/payment/stripe/publishable_key"}};return n.load(a).then(function(t){return t.stripeKey&&Stripe&&Stripe.setPublishableKey(t.stripeKey),t}).then(function(t){o.resolve(t)}),o.promise}]).run(["$rootScope","$http","$state","$mdSidenav","$q","Auth","$firebase","model","init","snippet","config",function(t,e,r,n,i,o,a,s,c,u,l){t.debug=l.debug,l.debug&&console.log("debug mode"),t.toggleSidenav=function(t){n(t).toggle()},t.sideNavLogout=function(t){o.$unauth(),n(t).toggle(),r.go("home")},o.$onAuth(function(e){if(t.user=e,t.loggedIn=!!e,e){a.params={$uid:e.uid},t.loggedIn=!!e;var r={profileImageURL:{refUrl:"users/"+e.uid+"/profileImageURL"},email:{refUrl:"users/"+e.uid+"/email"},phone:{refUrl:"users/"+e.uid+"/phone"}};a.load(r).then(function(r){e.profileImageURL=r.profileImageURL,e.email=r.email,e.phone=r.phone,t.user=e,console.log(t.user)})}else console.log("no user",e),a.params={}})}])}()},{}],18:[function(t,e,r){!function(){obsidian.module("core.linkFn",["firebase"]).factory("linkFn",["$controller","$injector","$q","snippet","Auth",function(t,e,r,n,i){function o(r,o,a){function s(){var i={},s=0,c=a||{};r.stateParams&&(i.$stateParams=r.stateParams),i.$scope=r;for(var u in c)"function"!=typeof e.invoke(c[u]).then?i[u]=e.invoke(c[u]):(s++,e.invoke(c[u]).then(function(t){i[u]=t,l.resolve()}));var l=new n.WaitUntil(s,function(){t(o,i)})}r.$watch("stateParams",s),i.$onAuth(s)}var a={pagePlusDirective:o};return a}])}()},{}],19:[function(require,module,exports){!function(){obsidian.module("core.model",["firebase"]).factory("model",["config","fbutil","$q","snippet",function(config,fbutil,$q,snippet){function ModelObj(t){this.modelPathArr=t.split("|"),this.pathArr=this.modelPathArr[0].split(".")}function init(t,e,r){if("string"==typeof e)return model[e]=r?{}:model[e]||{},void(t[e]=model[e]);for(var n=0;n<e.length;n++)model[e[n]]=r?{}:model[e[n]]||{},t[e[n]]=model[e[n]]}function update(t,e,r){var n=t.split(".");void 0!=r?snippet.evalAssignment([model,n],r):snippet.evalAssignment([model,n],[e])}var model={update:update,ModelObj:ModelObj,init:init,action:{},view:{}};return ModelObj.prototype={val:function(){for(var value={},modelPath="",j=0;j<this.pathArr.length;j++)modelPath=modelPath+"['"+this.pathArr[j]+"']";for(var i=1;i<this.modelPathArr.length;i++)value[this.modelPathArr[i]]=eval("model"+modelPath)[this.modelPathArr[i]];return"{}"===JSON.stringify(value)&&eval("value=model"+modelPath),value}},model}]).factory("$stateData",["model",function(t){var e={get data(){var e=t._stateTransitionCache;return delete t._stateTransitionCache,e}};return e.data}]).run(["$state","model","$rootScope",function(t,e,r){var n={};t.goWithData=function(e,i,o,a){var s=r.$on("$stateChangeStart",function(){s(),n[t.href(e,i)]={data:o};var a=r.$on("$stateChangeStart",function(){a(),delete n[t.href(e,i)]})});return t.go(e,i,a)},Object.defineProperty(t,"data",{get:function(){var e=n[t.href(t.current.name,t.params)]||{};return e.data}})}])}()},{}],20:[function(require,module,exports){!function(){obsidian.module("core.snippet",["firebase"]).factory("snippet",["config","$q","$filter",function(config,$q,$filter){function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function randomString(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");t||(t=Math.floor(Math.random()*e.length));for(var r="",n=0;t>n;n++)r+=e[Math.floor(Math.random()*e.length)];return r}function replaceParamsInString(string,params){for(var param in params)params.hasOwnProperty(param)&&(string=string.replace(eval("/\\"+param+"/g"),params[param]));return string}function replaceParamsInObj(t,e){var r=JSON.stringify(t);r=replaceParamsInString(r,e);var n=JSON.parse(r);for(var i in t)if(t.hasOwnProperty(i)&&"function"==typeof t[i]){var o=replaceParamsInString(i,e);n[o]=t[i]}return n}function evalAssignment(lhsArr,rhsArr){function toPathArr(t){return"string"==typeof t?t.split("."):t}var lhsPath="",lhs=lhsArr[0];if("[object Array]"===Object.prototype.toString.call(rhsArr))var rhs=rhsArr[0];if(void 0!=lhsArr[1])for(var lhsPathArr=toPathArr(lhsArr[1]),i=0;i<lhsPathArr.length;i++)lhsPath=lhsPath+"['"+lhsPathArr[i]+"']",i+1<lhsPathArr.length&&"object"!=typeof lhs[lhsPathArr[i]]?eval("lhsArr[0]"+lhsPath+"={}"):lhs=lhs[lhsPathArr[i]];if(!rhsArr)return eval("lhsArr[0]"+lhsPath);if("function"==typeof rhsArr)eval("rhs=rhsArr(lhsArr[0]"+lhsPath+")");else if(void 0!=rhsArr[1])for(var rhsPathArr=toPathArr(rhsArr[1]),j=0;j<rhsPathArr.length;j++){if(void 0===rhs[rhsPathArr[j]]){rhs=void 0;break}rhs=rhs[rhsPathArr[j]]}eval("lhsArr[0]"+lhsPath+"=rhs")}function flatten(t,e){function r(t,s){Object.keys(t).forEach(function(c){var u=t[c],l=e.safe&&Array.isArray(u),f=Object.prototype.toString.call(u),d=!1,p="[object Object]"===f||"[object Array]"===f,h=s?s+n+c:c;return e.maxDepth||(i=o+1),!l&&!d&&p&&Object.keys(u).length&&i>o?(++o,r(u,h)):void(a[h]=u)})}e=e||{};var n=e.delimiter||".",i=e.maxDepth,o=1,a={};return r(t),a}function unflatten(t,e){function r(t){var e=Number(t);return isNaN(e)||-1!==t.indexOf(".")?t:e}e=e||{};var n=e.delimiter||".",i=e.overwrite||!1,o={},a=!1;return a||"[object Object]"!==Object.prototype.toString.call(t)?t:(Object.keys(t).forEach(function(a){for(var s=a.split(n),c=r(s.shift()),u=r(s[0]),l=o;void 0!==u;){var f=Object.prototype.toString.call(l[c]),d="[object Object]"===f||"[object Array]"===f;(i&&!d||!i&&void 0===l[c])&&(l[c]="number"!=typeof u||e.object?{}:[]),l=l[c],s.length>0&&(c=r(s.shift()),u=r(s[0]))}l[c]=unflatten(t[a],e)}),o)}function cloneObject(t){if(null===t||"object"!=typeof t||"isActiveClone"in t)return t;var e=t.constructor();for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t.isActiveClone=null,e[r]=cloneObject(t[r]),delete t.isActiveClone);return e}function filterRawData(t,e,r){function n(t,e){var r="$";return"string"==typeof e.paramHeader&&(r=e.paramHeader),t.charAt(0)===r}function i(t,e,o,s){function c(n,a){var s=e[n]||e[a];if(s!==l)if(a.charAt(0)===u)o[a.slice(1)]=e[a];else if("object"!=typeof s){if(void 0===t[n]&&(void 0===r.removeUndefined||r.removeUndefined))return;o[n]=cloneObject(t[n])}else o[n]=isArray(s)?[]:{},i(t[n],s,o[n],a)}var u=r.useModelHeader||"_",l=r.escape||"#";if(u&&"object"==typeof e&&"object"!=typeof t)return console.log(s),console.log("error: raw data doesn't fit the filter","the key of the raw data is "+s),void(a=!0);if("object"==typeof e&&"object"==typeof t)for(var f in e){if(n(f,r)){for(var d in t)c(d,f);break}c(f,f)}}if(r=r||{},"object"!=typeof t||"object"!=typeof e)return t===e;var o=isArray(t)?[]:{},a=!1;return i(t,e,o,"none"),a?!1:o}function createBatchUpdateValues(t,e){function r(e){for(var n in e)if("valueArr"!==n)e.hasOwnProperty(n)&&("string"==typeof e[n]?""===t[e[n]]?e[n]="":e[n]=t[e[n]]||e[n]:"object"==typeof e[n]&&r(e[n]));else{for(var i=0;i<e.valueArr.length;i++){var o=e.valueArr[i];void 0===e.value&&(e.value={}),"string"==typeof o&&(e.value[o]=o)}delete e.valueArr}}var n;return"object"!=typeof e?(console.log("error: structure is not an object"),e):(n=cloneObject(e),r(n),n)}function checkIfPropertyExist(t){for(var e=t[0],r=t[1],n=!0,i=0;i<r.length;i++){if(void 0===e[r[i]]||null===e[r[i]]){n=!1;break}e=e[r[i]]}return n}function WaitUntil(t,e,r){var n=this;this.satisfiedCondition=0,this.resolve=function(){n.satisfiedCondition++,n.satisfiedCondition===t&&e.apply(r||null)},0===t&&e.apply(r||null)}function firstPartOfEmail(t){return ucfirst(t.substr(0,t.indexOf("@"))||"")}function ucfirst(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function DelayExec(t){this.delay=t||1e3}function DelayedFilter(t,e,r,n,i,o){var a=new DelayExec(o||1e3),s=this;this.refresh=function(){a.reset(function(){t[n]=t[n]?t[n]:{},t[r]=$filter("consecutive")(t[e],t[n],i),t.$digest()})},t.$watch(n,function(){s.refresh()}),t.$watch(e,function(){s.refresh()})}function isObjEmpty(t){return!Object.getOwnPropertyNames(t).length>0}return DelayExec.prototype={reset:function(t,e){var r=this;void 0!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.apply(null),r.timeout=void 0},e||this.delay),this.onComplete=t}},{DelayExec:DelayExec,DelayedFilter:DelayedFilter,flatten:flatten,unflatten:unflatten,isArray:isArray,cloneObject:cloneObject,evalAssignment:evalAssignment,checkIfPropertyExist:checkIfPropertyExist,WaitUntil:WaitUntil,replaceParamsInObj:replaceParamsInObj,replaceParamsInString:replaceParamsInString,createBatchUpdateValues:createBatchUpdateValues,filterRawData:filterRawData,firstPartOfEmail:firstPartOfEmail,ucfirst:ucfirst,randomString:randomString,isObjEmpty:isObjEmpty}}])}()},{}],21:[function(t,e,r){!function(){obsidian.module("custom.directives",[])}()},{}],22:[function(t,e,r){!function(){var t=obsidian.module("custom.filters",[]);t.filter("orderSubTotal",function(){return function(t){var e=0,r=t.products||{};for(var n in r)e+=r[n].price*r[n].quantity;return e}}).factory("filterUtil",["$filter",function(t){function e(e,r,n,i,o){function a(){e[i]=e[i]?e[i]:{},e[n]=t("consecutive")(e[r],e[i],o)}e[r]=e[r]||[];var s=e.$watch(i,function(){a()}),c=e.$watch(r,function(){a()});return function(){s(),c()}}return{watchFilterOpts:e}}])}()},{}],23:[function(t,e,r){!function(){var t=obsidian.module("custom.services",[]);t.factory("customFn",["FBURL","config","fbutil","$firebaseObject","$q","snippet",function(t,e,r,n,i,o){var a={};return a}])}()},{}],24:[function(t,e,r){!function(t){"use strict";var e=obsidian.module("pages.account",[]),r="account",n="/account",i="AccountCtrl",o="pages/account/account.html",a={user:["Auth",function(t){return t.$waitForAuth()}]},s="obAccount";e.controller(i,["$rootScope","$scope","Auth","fbutil","user","$state","$firebaseObject","$mdDialog",function(t,e,r,n,i,o,a,s){function c(){e.err=null,e.msg=null,e.emailerr=null,e.emailmsg=null}var u,l=a(n.ref("users",i.uid));l.$bindTo(e,"profile").then(function(t){u=t}),e.closeDialog=function(){s.hide()},e.logout=function(){u&&u(),l.$destroy(),r.$unauth(),s.cancel(),o.go("home")},e.changePassword=function(t,n,i){c(),t&&n&&i?i!==n?e.err="New pass and confirm do not match":r.$changePassword({email:l.email,oldPassword:t,newPassword:i}).then(function(){e.msg="Password changed"},function(t){e.err=t}):e.err="Please fill in all password fields"},e.clear=c,e.changeEmail=function(t,o){c();var a=l.email;r.$changeEmail({oldEmail:a,newEmail:o,password:t}).then(function(){return n.handler(function(t){n.ref("users",i.uid,"email").set(o,t)})}).then(function(){e.emailmsg="Email changed"},function(t){e.emailerr=t})}}]),e.config(["$stateProvider",function(t){t.state(r,{url:n,templateUrl:o,controller:i,resolve:a})}]),e.run(["$rootScope","$mdDialog",function(e,r){e.showAccount=function(n){var i=t.element(document.body);r.show({parent:i,targetEvent:n,templateUrl:"pages/account/accountDialog.html",locals:{user:e.user},clickOutsideToClose:!0,controller:"AccountCtrl"})}}]),s&&e.directive(s,["linkFn",function(t){return{restrict:"E",templateUrl:o,scope:{stateParams:"&"},link:function(e){t.pagePlusDirective(e,i,a)}}}])}(angular)},{}],25:[function(t,e,r){!function(t){"use strict";var e="backEnd",r="/backEnd",n="BackEndCtrl",i="pages/backEnd/backEnd.html",o=obsidian.module("pages.backEnd",["pages.backEnd.productManager","pages.backEnd.orders"]);o.controller(n,["$scope","$firebase","snippet","$errorHandler",function(t,e,r,n){this.test="1234"}]),o.config(["$stateProvider",function(t){t.state(e,{url:r,views:{"":{templateUrl:i,controller:n,controllerAs:"be"}}}).state(e+".orders",{url:"/orders",views:{content:{templateUrl:"pages/backEnd/orders/orders.html",controller:"Orders"}}}).state(e+".productManager",{url:"/productManager",views:{content:{templateUrl:"pages/backEnd/productManager/productManager.html",controller:"ProductManager"}}})}])}(angular)},{}],26:[function(t,e,r){!function(t){var e=t.module("pages.backEnd.orders",[]);e.controller("Orders",["$scope","filterUtil","customFn","$firebaseArray","$firebase","snippet","$errorHandler",function(e,r,n,i,o,a,s){e.loadOrders=function(t,n){var a=(new Date).getTime(),s=864e5,c=o.ref("orders").orderByChild("schedule").startAt(a+t*s).endAt(a+n*s);e.allOrdersSrc&&e.allOrdersSrc.$destroy(),e.unwatchFilter&&e.unwatchFilter(),e.allOrdersSrc=i(c),e.allOrdersSrc.$loaded().then(function(){e.unwatchFilter=r.watchFilterOpts(e,"allOrdersSrc","allOrders","filters")})},e.filterOpt={},e.refreshFilter=function(){e.search=e.search?e.search:"";var r=e.search.split(" ");e.filters=t.extend({},e.filterOpt,r)},e.$watch("filterOpt",function(){e.refreshFilter()},!0),e.statusOptions=["received","preparing","ready","picked-up"],e.orderStatus={},e.changeOrderStatus=function(e,r,n){console.log(e,r,n);var i=[{refUrl:"orders/"+e+"/orderStatus",value:n,set:!0},{refUrl:"users/"+r+"/orderHistory/"+e+"/orderStatus",value:n,set:!0}];o.batchUpdate(i,!0).then(t.noop,s({}))},e.calcSubTotal=n.calcSubTotal,e.removeOrder=function(t,r,n){var i=[{refUrl:"users/"+r+"/orderHistory/"+t,value:null,set:!0},{refUrl:"orders/"+t,value:null,set:!0}];o.batchUpdate(i,!0).then(function(){e.refreshFilter()})}}])}(angular)},{}],27:[function(t,e,r){!function(t){var e=t.module("pages.backEnd.productManager",[]);e.controller("ProductManager",["$scope","$firebaseArray","$firebaseObject","customFn","$firebase","snippet","$errorHandler",function(e,r,n,i,o,a,s){e.products=n(o.ref("products")),e.addOpt=function(){var t=e.selectedProduct.options;e.selectedProduct.options[t.length]=""},e.removeOpt=function(){var t=e.selectedProduct.options;0!==t.length&&e.selectedProduct.options.pop()},e.selectProduct=function(r){e.selectedProduct={},e.selectedProduct=t.extend({},e.products[r]),e.selectedProduct.options=e.selectedProduct.options||[]},e.updateProduct=function(){e.products[e.selectedProduct.itemId]=e.selectedProduct,e.products.$save(),e.selectedProduct={}},e.removeProduct=function(t){e.products[t]=null,e.products.$save()},e.createProduct=function(){var t=(new Date).getTime().toString(36);e.selectedProduct={itemId:t,itemName:"",image:"",description:"",listPrice:"",price:"",options:[""]}},e.clearProduct=function(){e.selectedProduct={}}}])}(angular)},{}],28:[function(t,e,r){!function(t){"use strict";var e="home",r="/home",n="HomeCtrl",i="pages/home/home.html",o=obsidian.module("pages.home",[]);o.controller(n,["$scope","$state",function(t,e){console.log(e.data),t.test=function(){e.goWithData("test2",{},{a:"a",b:"b"})}}]),o.config(["$stateProvider",function(t){t.state(e,{url:r,templateUrl:i,controller:n})}])}(angular)},{}],29:[function(t,e,r){!function(t){"use strict";var e="invoice",r="/invoice/:orderId",n="InvoiceCtrl",i="pages/invoice/invoice.html",o=obsidian.module("pages.invoice",[]);o.controller(n,["$scope","$firebaseObject","$state","customFn",function(t,e,r,n){console.log(r.data),t.invoice=r.data,t.date=new Date,t.OK=function(){r.go("home")}}]),o.config(["$stateProvider",function(t){t.state(e,{url:r,templateUrl:i,controller:n,resolve:{user:["Auth",function(t){return t.$waitForAuth()}]}})}])}(angular)},{}],30:[function(t,e,r){!function(t){"use strict";var e="login",r="/login",n="LoginCtrl",i="pages/login/login.html",o="obLogin",a={},s=obsidian.module("pages.login",["firebase.auth","firebase","firebase.utils","ui.router","core.model"]);s.controller(n,["$rootScope","$scope","Auth","$state","fbutil","snippet","$mdDialog",function(e,r,n,i,o,a,s){function c(t){i.go(t)}function u(e){r.err=t.isObject(e)&&e.code?e.code:e+""}function l(){return r.email?r.pass&&r.confirm?r.createMode&&r.pass!==r.confirm&&(r.err="Passwords do not match"):r.err="Please enter a password":r.err="Please enter an email address",!r.err}r.closeDialog=function(){s.hide()},r.email=null,r.pass=null,r.confirm=null,r.createMode=!1,r.login=function(t,e){console.log(t,e),r.err=null,n.$authWithPassword({email:t,password:e},{rememberMe:!0}).then(function(){s.hide(),c("home")},u)},r.createAccount=function(){if(r.err=null,l()){var t=r.email,e=r.pass;n.$createUser({email:t,password:e}).then(function(){return n.$authWithPassword({email:t,password:e})}).then(n.createAccount).then(function(){s.hide(),c("home")},u)}},r.loginWithProvider=function(t,e){n.loginWithProvider(t,e).then(function(t){return s.hide(),c("home"),n.checkIfAccountExistOnFb(t)},u).then(n.createAccount,u).then(function(){},u)}}]),s.config(["$stateProvider",function(t){t.state(e,{url:r,templateUrl:i,controller:n})}]),s.run(["$rootScope","$mdDialog",function(e,r){e.showLogin=function(e){var n=t.element(document.body);r.show({parent:n,targetEvent:e,templateUrl:"pages/login/loginDialog.html",clickOutsideToClose:!0,controller:"LoginCtrl"})}}]),o&&s.directive(o,["linkFn",function(t){return{restrict:"E",templateUrl:i,scope:{stateParams:"@"},link:function(e){t.pagePlusDirective(e,n,a)}}}])}(angular)},{}],31:[function(t,e,r){!function(t){"use strict";var e="myOrders",r="/myOrders",n="MyOrdersCtrl",i="pages/myOrders/myOrders.html",o=obsidian.module("pages.myOrders",["ui.router"]);o.controller(n,["user","$scope","filterUtil","$firebaseArray","$firebase",function(e,r,n,i,o){r.loadOrders=function(t,a){var s=(new Date).getTime(),c=864e5,u=o.ref("users/"+e.uid+"/orderHistory").orderByChild("createdTime").startAt(s+t*c).endAt(s+a*c);r.myOrdersSrc&&r.myOrdersSrc.$destroy(),r.unwatchFilter&&r.unwatchFilter(),r.myOrdersSrc=i(u),r.myOrdersSrc.$loaded().then(function(){r.unwatchFilter=n.watchFilterOpts(r,"myOrdersSrc","myOrders","filters")})},r.loadOrders(-65535,65535),r.filterOpt={},r.refreshFilter=function(){r.search=r.search?r.search:"";var e=r.search.split(" ");r.filters=t.extend({},r.filterOpt,e)},r.$watch("filterOpt",function(){r.refreshFilter()},!0)}]),o.config(["$stateProvider",function(t){t.stateAuthenticated(e,{url:r,templateUrl:i,controller:n,resolve:{user:["Auth",function(t){return t.$waitForAuth()}]}})}])}(angular)},{}],32:[function(t,e,r){!function(t){"use strict";var e=obsidian.module("pageSeed",["firebase.auth","firebase","firebase.utils","core.model"]),r="pageSeed",n="/pageSeed",i="PageSeedCtrl",o="pages/pageSeed/pageSeed.html",a="pageSeedDirective",s={user:["Auth",function(t){return t.$waitForAuth()}]};e.config(["$stateProvider",function(t){t.state(r,{url:n,templateUrl:o,controller:i,resolve:s})}]),e.controller(i,["$scope",function(t){}]),a&&e.directive(a,["linkFn",function(t){return{restrict:"E",templateUrl:o,scope:{stateParams:"@"},link:function(e){t.pagePlusDirective(e,i,s)}}}])}(angular)},{}],33:[function(t,e,r){!function(t){"use strict";var e="productDetail",r="/productDetail/:pid",n="ProductDetailCtrl",i="pages/productDetail/productDetail.html",o="productDetail",a={user:["Auth",function(t){return t.$waitForAuth()}]},s=obsidian.module("pages.productDetail",[]);s.controller(n,["$scope","$rootScope","user","$firebaseObject","$firebase","$location","$stateParams","$mdDialog",function(e,r,n,i,o,a,s,c){var u=s.pid;e.loggedIn=function(){return r.loggedIn},e.id=u,e.user=n,e.loaded=function(e){t.extend(e,{quantity:1,itemId:u})},e.cancel=function(){c.cancel()}}]),s.config(["$stateProvider",function(t){t.state(e,{url:r,templateUrl:i,controller:n,resolve:a})}]),o&&s.directive(o,["linkFn",function(t){return{restrict:"E",templateUrl:i,scope:{stateParams:"="},link:function(e){t.pagePlusDirective(e,n,a)}}}])}(angular)},{}],34:[function(t,e,r){!function(t){"use strict";var e="productList",r="/productList",n="ProductListCtrl",i="pages/productList/productList.html",o=obsidian.module("pages.productList",[]);o.controller(n,["$rootScope","$scope","$mdDialog",function(e,r,n){r.showDetail=function(r,i){var o=t.element(document.body);n.show({parent:o,targetEvent:r,templateUrl:"pages/productDetail/productDetail.html",locals:{$stateParams:{pid:i},user:e.user},clickOutsideToClose:!0,controller:"ProductDetailCtrl"})}}]),o.config(["$stateProvider",function(t){t.state(e,{url:r,templateUrl:i,controller:n})}])}(angular)},{}],35:[function(t,e,r){!function(t){"use strict";var e="shoppingCart",r="/shoppingCart",n="ShoppingCartCtrl",i="pages/shoppingCart/shoppingCart.html",o=obsidian.module("pages.shoppingCart",[]);o.controller(n,["$q","config","user","$scope","$rootScope","$firebase","snippet","$state","ngCart",function(e,r,n,i,o,a,s,c,u){function l(){if(o.user){var t=i.clientEmail===o.user.email,e=i.clientPhone===o.user.phone,r=[];t&&r.push({refUrl:"users/"+n.uid+"/email",value:i.clientEmail}),e&&r.push({refUrl:"users/"+n.uid+"/phone",value:i.clientPhone}),r.length>0&&a.batchUpdate(r)}}function f(){return 0===i.dt.getDay()||6===i.dt.getDay()?(alert("Please pick a weekday."),!1):i.dt.getTime()<(new Date).getTime()+18e5?(alert("Please pick a time at least 30 minutes from now."),!1):!0}function d(t,e){i.payment={},e.error?window.alert("it failed! error: "+e.error.message):(console.log("success! token: "+e.id),i.payment={token:e.id,provider:"stripe"})}function p(){t.forEach(u.getItems(),function(t){m.products[t._id]=t._data,m.products[t._id].quantity=t._quantity,m.products[t._id].itemId=t._id});var e=i.payment||{};e.method=i.paymentMethod,t.extend(m,{clientName:i.clientName,clientId:i.uid,clientEmail:i.clientEmail,clientPhone:i.clientPhone,createdTime:Firebase.ServerValue.TIMESTAMP,note:i.note||null,schedule:i.dt.getTime(),orderStatus:"received",payment:e,shipment:{}})}function h(e){l(),p();var r={clientName:"",clientId:"",clientEmail:"",clientPhone:"",createdTime:"",orderStatus:"",note:"",products:{$productId:{itemName:"",itemId:"",quantity:"",price:"",selectedOption:""}},payment:"",shipment:"",schedule:""},n={refUrl:"orders/$orderId",value:s.filterRawData(m,r)},o={createdTime:"",orderStatus:"",note:"",products:{$productId:{itemId:"",itemName:"",quantity:"",price:"",selectedOption:""}},payment:"",shipment:"",schedule:""},c={refUrl:"users/$uid/orderHistory/$orderId",value:s.filterRawData(m,o)},u=[n,c];return i.invoice=t.extend({},m),a.$communicate({request:u,response:"uponPickup"===e?!1:{isCharged:"users/$uid/orderHistory/$orderId/payment/status"}})}i.ngCart=u;var m={products:{}};i.emptyCart=function(){u.empty(),u.empty()},i.paymentMethod="uponPickup",i.clientEmail=o.user?o.user.email:null,i.clientPhone=o.user?o.user.phone:null,i.clientName=o.user?n[n.provider].displayName||n[n.provider].email:null,i.uid=o.user?o.user.uid:null,r.debug&&(i.number="4242424242424242",i.expiry="11/16",i.cvc="123"),i.submitOrder=function(){f()&&(i.waiting=!0,"uponPickup"===i.paymentMethod&&h("uponPickup").then(function(t){var e=t.params.$orderId;i.invoice.orderId=e,c.goWithData("invoice",{orderId:e},i.invoice),i.emptyCart(),i.$$phase||i.$apply()}))},i.stripeCallback=function(t,e){"uponPickup"!==i.paymentMethod&&f()&&(d(t,e),h("creditCard").then(function(t){var e=t.params.$orderId;console.log("orderId is "+e),clearTimeout(timeout),"succeeded"===t.isCharged&&(c.go("invoice",i.invoice),console.log("transaction succeeded"),i.emptyCart(),i.$$phase||i.$apply()),i.waiting=!1},function(t){console.log(JSON.stringify(t))}))},i.dt=new Date,i.hour=12,i.minute=0,i.minDate=i.dt,i.maxDate=new Date(i.dt.getFullYear(),i.dt.getMonth()+2,i.dt.getDate()),i.changeDt=function(){i.hour=12,i.dt.setHours(12),i.minute=0,i.dt.setMinutes(0)},i.changeDt(),i.changeTime=function(){i.dt.setHours(i.hour),i.dt.setMinutes(i.minute)}}]),o.config(["$stateProvider",function(t){t.state(e,{url:r,templateUrl:i,controller:n,resolve:{user:["Auth",function(t){return t.$waitForAuth()}]}})}]),o.run(["$rootScope","ngCart","config",function(t,e,r){function n(){t.cartTotalItems=e.getTotalItems()}e.setShipping(r.shipping),e.setTaxRate(r.taxRate),t.$on("ngCart:change",n),n()}])}(angular)},{}],36:[function(t,e,r){!function(t){"use strict";var e="test2",r="/test2",n="Test2Ctrl",i="pages/test2/test2.html",o="",a=obsidian.module("pages.test2",[]);a.controller(n,["$scope","$state","$firebase","$rootScope",function(t,e,r,n){console.log(e.data),t.changed=function(){console.log("data changed to "+t.inputDelayTest)};var i=[{refUrl:"products/bd_001"},{refUrl:"products/bd_002"},{refUrl:"products",opt:{orderBy:"Key",limitToFirst:2}}];r.load(i).then(function(t){console.log(t)}),t.test=function(){e.go("home",{test:"test"})}}]),a.config(["$stateProvider",function(t){t.state(e,{templateUrl:i,controller:n,url:r})}]),o&&a.directive(o,["$controller",function(t){return{restrict:"E",templateUrl:i,scope:{stateParams:"@"},link:function(e,r,i){e.$watch("initparams",function(){t(n,{$scope:e})})}}}])}(angular)},{}],37:[function(t,e,r){!function(t){"use strict";var e="test",r="/test",n="TestCtrl",i="pages/test/test.html",o=obsidian.module("pages.test",[]);o.controller(n,["$scope","$state","$timeout","fbutil","$firebase",function(t,e,r,n,i){t.path="products",t.id="bd_001",t.loaded=function(e){console.log(e),t.isLoaded=!0},t.from="https://lauchbox.firebaseio.com/products",t.to="https://lauchbox2.firebaseio.com/products",t.move=function(t,e){i.move(t,e)},t.updateDescription=function(t){t.$save()},t.getMultipleRefVal=function(){i.getMultipleRefVal({path1:"test/path1",path2:"test/path2/&path1",path3:"test/path3/&path1/&path2"}).then(function(e){t.result=e})}}]),o.config(["$stateProvider",function(t){t.state(e,{templateUrl:i,controller:n,url:r})}])}(angular)},{}]},{},[2,4,3,6,10,5,13,9,11,8,7,14,12,19,20,15,18,16,17,23,22,21,30,24,34,33,28,35,32,31,25,26,27,37,36,29,1]);
//# sourceMappingURL=bundle.js.map
